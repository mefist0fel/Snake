<html>
	<head>
		<title>Snake 3d game</title>
		<style type="text/css">
		body {
			display: block;
			background-color:0;
			width: 100%;
			height: 100%;
			margin: 0;
		}
		canvas {
			background-color:0;
			display: block;
			margin: 0px auto;
		}
		</style>
	</head>
	<body>
		<canvas id="snake"></canvas>
	</body>
	<script type="text/javascript">
	
	var aa=Number.MAX_VALUE,ba=Number.MIN_VALUE,da=Math.PI,ea=Math.cos,fa=Math.sin;function ha(b,a,c,d,f,g){return b>=c&&b<=f&&a>=d&&a<=g}function la(b,a){return[b[0]-a[0],b[1]-a[1]]}function ma(b){var a=1/Math.sqrt(b[0]*b[0]+b[1]*b[1]);Infinity==a&&(a=aa);-Infinity==a&&(a=ba);return[b[0]*a,b[1]*a]}function e(b,a,c){return[void 0===b?0:b,void 0===a?0:a,void 0===c?0:c]}function h(b,a){return[b[0]+a[0],b[1]+a[1],b[2]+a[2]]}function m(b,a){return[b[0]-a[0],b[1]-a[1],b[2]-a[2]]}
function n(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function na(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}function p(b,a){return e(b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0])}function r(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])}function t(b){var a=1/r(b);NaN==a&&(a=aa);Infinity==a&&(a=aa);-Infinity==a&&(a=ba);return n(b,a)}function v(b,a,c){return h(n(b,1-c),n(a,c))}function oa(b){for(var a=e(),c=0;c<b.length;c++)a=h(a,b[c]);return n(a,1/parseFloat(b.length))}
function x(b){var a=(void 0===b?0:b)/180*da;b=ea(a);a=fa(a);return[1,0,0,0,b,-a,0,a,b]}function A(b){var a=(void 0===b?0:b)/180*da;b=ea(a);a=fa(a);return[b,0,a,0,1,0,-a,0,b]}function B(b,a){var c=b[0],d=b[1],f=b[2],g=a/180*da,k=ea(g);g=fa(g);var l=1-k;return[c*c+(1-c*c)*k,c*d*l-f*g,c*f*l+d*g,c*d*l+f*g,d*d+(1-d*d)*k,d*f*l-c*g,c*f*l-d*g,d*f*l+c*g,f*f+(1-f*f)*k]}
function pa(b,a){return[b[0]*a[0]+b[1]*a[3]+b[2]*a[6],b[0]*a[1]+b[1]*a[4]+b[2]*a[7],b[0]*a[2]+b[1]*a[5]+b[2]*a[8],b[3]*a[0]+b[4]*a[3]+b[5]*a[6],b[3]*a[1]+b[4]*a[4]+b[5]*a[7],b[3]*a[2]+b[4]*a[5]+b[5]*a[8],b[6]*a[0]+b[7]*a[3]+b[8]*a[6],b[6]*a[1]+b[7]*a[4]+b[8]*a[7],b[6]*a[2]+b[7]*a[5]+b[8]*a[8]]}function C(b,a){return[b[0]*a[0]+b[1]*a[1]+b[2]*a[2],b[0]*a[3]+b[1]*a[4]+b[2]*a[5],b[0]*a[6]+b[1]*a[7]+b[2]*a[8]]}
function qa(b,a){var c=[b[0],b[1],b[2],1];c=[c[0]*a[0]+c[1]*a[4]+c[2]*a[8]+c[3]*a[12],c[0]*a[1]+c[1]*a[5]+c[2]*a[9]+c[3]*a[13],c[0]*a[2]+c[1]*a[6]+c[2]*a[10]+c[3]*a[14],c[0]*a[3]+c[1]*a[7]+c[2]*a[11]+c[3]*a[15]];return[c[0]/c[3],c[1]/c[3],c[2]/c[3]]}var ra;function F(){for(var b=H,a=0;a<b.o.length;a++)b.o[a].fa(b);b.o.sort(sa);for(a=0;a<b.o.length;a++)b.o[a].ca(b.canvas)}function ta(b,a){var c=h(a,n(b.position,-1));c=C(c,b.K);c=h(c,b.C);c=qa(c,b.ga);c=n(c,b.aa);return h(c,b.S)}
function K(b,a,c){this.position=b;this.l=e();this.color=void 0===c?"#FFEEEE":c;this.$=e(void 0===a?.5:a);this.ha=10;this.enabled=!0;ra.o.push(this)}K.prototype.fa=function(b){if(this.enabled){this.l=ta(b,this.position);var a=h(this.position,n(b.position,-1));a=C(a,b.K);a=h(a,b.C);a=h(a,this.$);a=qa(a,b.ga);a=n(a,b.aa);this.ha=r(m(this.l,h(a,b.S)))}};K.prototype.ca=function(b){this.enabled&&(b.fillStyle=this.color,b.beginPath(),b.arc(this.l[0],this.l[1],this.ha,0,2*Math.PI),b.closePath(),b.fill())};
function L(b,a,c,d,f,g){this.B=[b,a,c];this.j=[b,a,c];this.position=oa(this.B);this.l=e();this.color=void 0===d?"#FFEEEE":d;this.ra=void 0===g?!0:g;this.filled=void 0===f?!0:f;this.enabled=!0;ra.o.push(this)}L.prototype.fa=function(b){if(this.enabled){this.l=ta(b,this.position);for(var a=0;a<this.j.length;a++)this.j[a]=ta(b,this.B[a])}};
L.prototype.ca=function(b){var a;if(a=this.enabled){if(a=this.ra){a=this.j[0];var c=la(this.j[1],a);c=ma([c[1],-c[0]]);a=la(a,this.j[2]);a=0<c[0]*a[0]+c[1]*a[1]}a=!a}if(a){b.fillStyle=this.color;b.strokeStyle=this.color;b.beginPath();a=this.j[this.j.length-1];b.moveTo(a[0],a[1]);for(a=0;a<this.j.length;a++)b.lineTo(this.j[a][0],this.j[a][1]);b.closePath();this.filled&&b.fill();b.stroke()}};function sa(b,a){return b.l[2]<a.l[2]?-1:b.l[2]>a.l[2]?1:0}function ua(){va(this,0)}
function va(b,a){b.id=a;ra.o=[];b.P=null;b.O=3;b.M=0;b.R=6+3*a;b.Y=parseInt(a/4+2);b.F=[];var c=null;if(0==a||a%3==parseInt(a/3)%3)b.Y=0;switch(a%3){case 0:wa();c=xa();break;case 1:var d=void 0===d?11:d;for(var f=[],g=2/d,k=[x(0),x(90),x(180),x(270),A(90),A(270)],l=[.5,.6,.7,.8,.9,1],q=0;q<k.length;q++)for(var y=0;y<d;y++)for(var z=0;z<d;z++){var G=C(n(e(y*g-1,z*g-1,1),4),k[q]);c=C(n(e((y+1)*g-1,z*g-1,1),4),k[q]);var J=C(n(e((y+1)*g-1,(z+1)*g-1,1),4),k[q]),D=C(n(e(y*g-1,(z+1)*g-1,1),4),k[q]),u=parseInt(255*
l[q]),S=parseInt(195*l[q]);u=M(u,u,u);1==(y+z)%2&&(u=M(S,S,S));f.push(new L(G,c,J,u));f.push(new L(G,J,D,u))}f=[e(4.5,4.5,4.5),e(4.5,-4.5,4.5),e(-4.5,4.5,4.5),e(-4.5,-4.5,4.5),e(4.5,4.5,-4.5),e(4.5,-4.5,-4.5),e(-4.5,4.5,-4.5),e(-4.5,-4.5,-4.5)];g=[[0,2,1],[1,2,3],[4,5,6],[5,7,6],[0,6,2],[0,4,6],[1,3,7],[1,7,5],[0,1,5],[0,5,4],[2,6,7],[2,7,3]];k=[];for(l=0;l<g.length;l++)k.push([f[g[l][0]],f[g[l][1]],f[g[l][2]]]);c=k;break;case 2:q=void 0===q?32:q;y=void 0===y?4:y;D=void 0===D?7:D;z=void 0===z?8:z;
G=void 0===G?6:G;d=[];c=[];for(J=0;J<=q;J++)S=C(e(y,0,0),A(360/q*J)),c.push(S);J=e(0,.5*D,0);D=e(0,.5*-D,0);S=1/z;u=1/G;for(var U=0;U<q;U++){for(var I,ca=h(J,c[U]),ia=h(J,c[U+1]),ja=h(D,c[U]),ka=h(D,c[U+1]),w=0;w<G;w++){var E=(G-w)*u*30;I=M(195+E,195+E,195+E);1==(U+w)%2&&(I=M(255-E,255-E,255-E));upperStart=v(J,ca,w*u);upperEnd=v(J,ia,w*u);downerStart=v(J,ca,(w+1)*u);downerEnd=v(J,ia,(w+1)*u);d.push(new L(upperStart,downerEnd,upperEnd,I));d.push(new L(upperStart,downerStart,downerEnd,I))}for(w=0;w<
G;w++)E=(G-w)*u*30,I=M(195+E,195+E,195+E),1==(U+w)%2&&(I=M(255-E,255-E,255-E)),upperStart=v(D,ja,(w+1)*u),upperEnd=v(D,ka,(w+1)*u),downerStart=v(D,ja,w*u),downerEnd=v(D,ka,w*u),d.push(new L(upperStart,downerEnd,upperEnd,I)),d.push(new L(upperStart,downerStart,downerEnd,I));for(w=0;w<z;w++)E=ca[0]/y*.5+.5,I=parseInt(255*(.6*E+.4)),E=parseInt(195*(.6*E+.4)),I=M(I,I,I),1==(U+w)%2&&(I=M(E,E,E)),upperStart=v(ca,ja,w*S),upperEnd=v(ia,ka,w*S),downerStart=v(ca,ja,(w+1)*S),downerEnd=v(ia,ka,(w+1)*S),d.push(new L(upperStart,
downerEnd,upperEnd,I)),d.push(new L(upperStart,downerStart,downerEnd,I))}f=void 0===f?16:f;l=void 0===l?4:l;g=void 0===g?7:g;k=void 0===k?.5:k;q=[];y=[];for(z=0;z<=f;z++)G=C(e(l+k,0,0),A(360/f*z)),y.push(G);l=e(0,.5*g+k,0);g=e(0,.5*-g-k,0);for(k=0;k<f;k++)z=h(l,y[k]),G=h(l,y[k+1]),d=h(g,y[k]),c=h(g,y[k+1]),q.push([l,z,G]),q.push([g,c,d]),q.push([z,c,G]),q.push([z,d,c]);c=q}for(f=0;f<c.length;f++)g=c[f],b.F.push(new ya(g[0],g[1],g[2]));b.b=new za(b.F);b.c=new Aa(b.b);Ba(b.c,!1);b.m=[new N(M(51,255,
51)),new N(M(51,255,51)),new N(M(51,255,51))];b.i=[];for(f=0;f<b.Y;f++)b.i.push(new N(M(0,0,200)))}
ua.prototype.update=function(b){for(var a=0;a<this.m.length;a++)this.m[a].update(b);for(a=0;a<this.i.length;a++)this.i[a].update(b);for(b=0;b<this.m.length;b++)1>r(m(this.b.f,this.m[b].position))&&(this.m[b].remove(Ca(this.b)),this.c.D+=.5,this.M+=1);for(b=0;b<this.i.length;b++)1>r(m(this.b.f,this.i[b].position))&&(this.i[b].remove(Ca(this.b)),this.c.D-=.2,--this.O);for(b=6;b<this.c.s.length-1;b++)1>r(m(this.b.f,this.c.s[b]))&&(this.O=0)};
ua.prototype.start=function(){Ba(this.c,!0);for(var b=0;b<this.m.length;b++)this.m[b].remove(Ca(this.b));for(b=0;b<this.i.length;b++)this.i[b].remove(Ca(this.b))};function Da(){var b=O;Ba(b.c,!1);for(var a=0;a<b.m.length;a++)b.m[a].remove(e());for(a=0;a<b.i.length;a++)b.i[a].remove(e())}
function Ea(){var b=O,a=Fa;if(null==b.P){for(var c=[],d=0;d<b.F.length;d++){var f=new L(b.F[d].G,b.F[d].H,b.F[d].I,"rgb(255,255,255)",!1,!1);c.push(f)}c.push(new K(e(8,0,0),.5,M(255,0,0)));c.push(new K(e(0,8,0),.5,M(0,255,0)));c.push(new K(e(0,0,8),.5,M(0,0,255)));b.P=c}for(c=0;c<b.P.length;c++)b.P[c].enabled=a}
function wa(){function b(a,b,c,d,g){return C(n(t(e(a*c-.5,b*c-.5,.5)),d),g)}var a=void 0===a?5:a;var c=void 0===c?9:c;for(var d=[],f=1/c,g=[x(0),x(90),x(180),x(270),A(90),A(270)],k=0;k<g.length;k++)for(var l=0;l<c;l++)for(var q=0;q<c;q++){var y=b(l,q,f,a,g[k]),z=b(l+1,q,f,a,g[k]),G=b(l+1,q+1,f,a,g[k]),J=b(l,q+1,f,a,g[k]),D=.5*b(l+.5,q+.5,f,1,g[k])[0]+.5,u=parseInt(255*(.6*D+.4));D=parseInt(195*(.6*D+.4));u=M(u,u,u);1==(l+q)%2&&(u=M(D,D,D));d.push(new L(y,z,G,u));d.push(new L(y,G,J,u))}}
function xa(){function b(a,b,c,d,g){return C(n(t(e(a*c-.5,b*c-.5,.5)),d),g)}var a=void 0===a?9:a;for(var c=[],d=1/a,f=[x(0),x(90),x(180),x(270),A(90),A(270)],g=0;g<f.length;g++)for(var k=0;k<a;k++)for(var l=0;l<a;l++){var q=b(k,l,d,5.5,f[g]),y=b(k+1,l+1,d,5.5,f[g]),z=b(k,l+1,d,5.5,f[g]);c.push([q,b(k+1,l,d,5.5,f[g]),y]);c.push([q,y,z])}return c}function M(b,a,c,d){function f(a){a=a.toString(16);return 1==a.length?"0"+a:a}return"#"+f(b)+f(a)+f(c)+f(void 0===d?255:d)}
function za(b){this.Z=b=void 0===b?[]:b;this.currentNode=this.Z[0];this.f=this.currentNode.ba;this.w=this.currentNode.ta;for(var a=0;a<b.length;a++)b[a].name=a;for(a=0;a<b.length;a++)for(var c=0;c<b.length;c++)if(a!=c)for(var d=b[a],f=b[c],g=0;g<f.B.length;g++){var k=f.B[g],l=f.B[(g+1)%f.B.length];if(Ga(d.G,d.H,k,l)){d.T=f;break}if(Ga(d.H,d.I,k,l)){d.U=f;break}if(Ga(d.I,d.G,k,l)){d.V=f;break}}}za.prototype.push=function(b){this.va.push(b)};
function Ca(b){return b.Z[Math.floor(Math.random()*(b.Z.length-0))+0].ba}za.prototype.moveTo=function(b,a,c){var d=Ha(this.currentNode,b,this.f,a,c);a=m(Ha(this.currentNode,b,h(this.f,this.w),a,c),d);this.currentNode=b;this.f=d;this.w=a};function Ha(b,a,c,d,f){c=m(c,d);f=t(m(f,d));return h(h(d,n(f,na(f,c))),n(p(a.J,f),na(p(b.J,f),c)))}
function ya(b,a,c){this.G=b;this.H=a;this.I=c;this.B=[b,a,c];var d=oa([b,a,c]);this.ba=d;this.J=t(p(m(a,d),m(c,d)));this.ta=t(m(a,d));d=m(a,b);a=m(c,a);b=m(b,c);this.oa=this.G;this.la=t(p(this.J,d));this.pa=this.H;this.ma=t(p(this.J,a));this.qa=this.I;this.na=t(p(this.J,b));this.V=this.U=this.T=null}function Ga(b,a,c,d){return.001>r(m(b,c))&&.001>r(m(a,d))||.001>r(m(b,d))&&.001>r(m(a,c))}
function N(b){var a=e();var c=void 0===c?.4:c;var d=void 0===d?6:d;this.position=a;this.ea=new K(a,0,b);this.sa=c;this.v=0;this.ka=d}N.prototype.remove=function(b){this.position=b;this.v=-Math.abs(this.v)};N.prototype.update=function(b){1>this.v&&(b=this.v+this.ka*b,1<b?b=1:0>this.v&&0<b&&(this.ea.position=this.position),this.v=b,this.ea.$=e(this.sa*Math.abs(this.v)))};
function Aa(b){this.b=b;this.position=b.f;this.da=new K(this.position,.45,M(40,140,40));this.ia=new K(h(this.position,n(b.w,.525)),.1,M(30,130,30));this.rotationAngle=0;this.D=3.5;this.s=[];this.u=[];this.L=this.position;this.enabled=!0}Aa.prototype.rotate=function(b){this.rotationAngle=b};function Ba(b,a){b.enabled=a;b.da.enabled=a;b.ia.enabled=a;for(var c=0;c<b.u.length;c++)b.u[c].enabled=a}
Aa.prototype.update=function(b){var a=140*this.rotationAngle*b,c=this.b;b*=7;b=h(c.f,n(c.w,void 0===b?1:b));var d=c.currentNode;0>na(d.la,m(b,d.oa))?null!=c.currentNode.T&&c.moveTo(c.currentNode.T,c.currentNode.G,c.currentNode.H):(d=c.currentNode,0>na(d.ma,m(b,d.pa))?null!=c.currentNode.U&&c.moveTo(c.currentNode.U,c.currentNode.H,c.currentNode.I):(d=c.currentNode,0>na(d.na,m(b,d.qa))?null!=c.currentNode.V&&c.moveTo(c.currentNode.V,c.currentNode.I,c.currentNode.G):c.f=b));c=this.b;c.w=t(C(c.w,B(c.currentNode.J,
void 0===a?0:a)));this.position=this.b.f;this.da.position=this.b.f;this.ia.position=h(this.b.f,n(this.b.w,.525));a=r(m(this.L,this.position));1<a&&(--a,this.L=h(this.L,t(m(this.position,this.L))),this.s.unshift(this.L),this.s.pop());for(c=this.u.length;c<this.D;c++)this.u.push(new K(e(),0,M(40,Math.max(30,parseInt(142-3*c)),40)));for(c=this.s.length;c<this.u.length+1;c++)this.s.unshift(this.position);for(c=0;c<this.u.length;c++)this.u[c].position=v(this.s[c+1],this.s[c],a),this.u[c].$=e(Math.min(.5,
.25*(this.D-c)))};
var Ia=1/30,Ja,La=Ka(),P=document.documentElement.clientWidth,Q=document.documentElement.clientHeight,R=Math.min(P,Q),Ma=0,T=function(){function b(){for(var a=[],b=0;200>b;b++)a[b]=!1;return a}function a(a){f.touches=c(a);a.preventDefault()}function c(a){for(var b=[],c=0;c<a.touches.length;c++)b.push([a.touches[c].clientX,a.touches[c].clientY]);return b}function d(a,b){document.addEventListener(a,b,{passive:!1})}var f={g:b(),a:b(),W:!1,X:!1,h:[0,0],touches:[],ja:[],N:function(a,b,c,d){if(this.W&&
ha(this.h[0],this.h[1],a,b,c,d))return!0;for(var f=0;f<this.touches.length;f++)if(ha(this.touches[f][0],this.touches[f][1],a,b,c,d))return!0;return!1},A:function(a,b,c,d){if(this.X&&ha(this.h[0],this.h[1],a,b,c,d))return!0;for(var f=0;f<this.touches.length;f++)if(ha(this.ja[f][0],this.ja[f][1],a,b,c,d))return!0;return!1},ua:function(){this.X=!1;this.a=b()}};d("mousedown",function(a){f.W=!0;f.X=!0;f.h[0]=a.clientX;f.h[1]=a.clientY});d("mouseup",function(a){f.W=!1;f.h[0]=a.clientX;f.h[1]=a.clientY});
d("mousemove",function(a){f.h[0]=a.clientX;f.h[1]=a.clientY});d("keydown",function(a){f.a[a.keyCode]=!0;f.g[a.keyCode]=!0});d("keyup",function(a){f.g[a.keyCode]=!1});d("touchstart",function(b){f.touches=c(b);a(b)});d("touchmove",a);d("touchend",a);d("touchcancel",a);return f}(),Na=document.getElementById("snake"),V=Na.getContext("2d"),H=new function(){this.o=[];this.S=e(50,50);this.aa=100;this.K=[1,0,0,0,1,0,0,0,1];this.ga=[1,0,0,0,0,1,0,0,0,0,3,-1,0,0,-4,0];this.C=e(0,0,20);this.position=e();this.canvas=
V;ra=this};Oa();var W=0,X=1,Y=0,Pa=[1,0,0,0,1,0,0,0,1],Qa=t(e(1,1,1)),O=new ua,Fa=!1,Ra=!1;function Ka(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}
function Sa(){var b=.13*R,a=Q-.1*R,c=.12*R;V.fillStyle="#FFFFFF33";V.strokeStyle="#FFFFFF11";V.beginPath();V.arc(b+.2*c,a,.5*c,.838*Math.PI,1.162*Math.PI,!0);V.arc(b+.2*c,a,.3*c,1.3*Math.PI,.7*Math.PI);V.closePath();V.fill();V.stroke();V.beginPath();V.moveTo(b+.04*c-.8*c,a);V.lineTo(b+.04*c-.4*c,a+.4*c);V.lineTo(b+.04*c-.4*c,a+.12*c);V.lineTo(b+.04*c-.04*c,a+.12*c);V.lineTo(b+.04*c-.04*c,a-.12*c);V.lineTo(b+.04*c-.4*c,a-.12*c);V.lineTo(b+.04*c-.4*c,a-.4*c);V.closePath();V.fill();V.stroke()}
function Ta(){var b=P-.1*R,a=Q-.1*R,c=.1*R;V.fillStyle="#FFFFFF33";V.strokeStyle="#FFFFFF11";V.beginPath();V.moveTo(b+.5*c,a);V.lineTo(b,a+.5*c);V.lineTo(b-.5*c,a+.5*c);V.lineTo(b,a);V.lineTo(b-.5*c,a-.5*c);V.lineTo(b,a-.5*c);V.closePath();V.fill();V.stroke()}
function Ua(){var b=.1*R,a=Q-.1*R,c=.1*R;V.fillStyle="#FFFFFF33";V.strokeStyle="#FFFFFF11";V.beginPath();V.moveTo(b-.5*c,a);V.lineTo(b,a+.5*c);V.lineTo(b+.5*c,a+.5*c);V.lineTo(b,a);V.lineTo(b+.5*c,a-.5*c);V.lineTo(b,a-.5*c);V.closePath();V.fill();V.stroke()}function Va(){var b=t(O.c.position),a=Math.acos(ma([b[0],b[2]])[0])/Math.PI*180,c=Math.acos(b[1])/Math.PI*180-90;a=0<b[2]?a+90:90-a;return[c,a]}
function Z(b){switch(b){default:case 0:Pa=H.K;Da();break;case 4:W=1;break;case 1:break;case 3:if(1!=Ma){for(var a=0;30>a;a++)O.c.update(1/30);O.start()}break;case 5:Da();Y+=1;break;case 6:Da()}Ma=b}
function Wa(){var b=Ka(),a=(b-La)/1E3;Ja=1/a;a>Ia&&(a=Ia);switch(Ma){default:case 0:if(0<W)W-=3*a,0>W&&(W=0),a=2*(W-.5),0<a?H.C=e(30*(1-a*a)*X,0,20):(O.id!=Y&&va(O,Y),H.C=e(30*(-1+a*a)*X,0,20));else{T.a[32]&&Z(4);(T.g[65]||T.g[37])&&0<Y&&(W=1,X=-1,--Y);if(T.g[68]||T.g[39])X=W=1,Y+=1;T.N(0,.5*Q,.3*P,Q)&&0<Y&&(W=1,X=-1,--Y);T.N(.7*P,.5*Q,P,Q)&&(X=W=1,Y+=1);T.A(.4*P,.5*Q,.6*P,Q)&&Z(4);O.update(a);Pa=pa(Pa,B(Qa,20*a));Qa=t(e(100*Qa[0]+(2*Math.random()-1),100*Qa[1]+(2*Math.random()-1),100*Qa[2]+(2*Math.random()-
1)));H.K=Pa;H.position=n(H.position,1-1*a);T.a[113]&&(Fa=!Fa,Ea())}break;case 4:if(0<W){var c=W-1*a;.5>=c&&.5<W&&va(O,Y);W=c;0>W&&(W=0);.5>W&&(O.update(a),H.position=O.c.position,a=Va(),H.K=pa(B(e(1),a[0]),B(e(0,1),a[1])))}else Z(3);break;case 1:T.a[27]&&Z(3);T.A(.7*P,0,P,.3*Q)&&Z(3);T.a[81]&&Z(0);break;case 5:if(0<W)W-=3*a,0>W&&(W=0),a=2*(W-.5),0<a?H.C=e(30*(1-a*a)*X,0,15):(O.id!=Y&&va(O,Y),H.C=e(30*(-1+a*a)*X,0,15));else if(O.id==Y)Z(4);else{T.a[27]&&(--Y,Z(0));T.a[32]&&(X=W=1);if(T.a[65]||T.a[37])--Y,
Z(0);if(T.a[68]||T.a[39])X=W=1;T.A(0,.5*Q,.3*P,Q)&&(--Y,Z(0));T.A(.7*P,0,P,Q)&&(X=W=1);O.update(a)}break;case 6:T.a[27]&&Z(0);T.a[32]&&Z(4);(T.a[65]||T.a[37])&&Z(0);(T.a[68]||T.a[39])&&Z(4);T.A(0,.5*Q,.3*P,Q)&&Z(0);T.A(.7*P,0,P,Q)&&Z(0);O.update(a);break;case 3:T.a[27]&&Z(1);T.A(.7*P,0,P,.3*Q)&&Z(1);c=0;if(T.g[65]||T.g[37])c=1;if(T.g[68]||T.g[39])c=-1;T.N(0,0,.5*P,Q)&&(c=1);T.N(.5*P,0,P,Q)&&(c=-1);O.c.rotate(c);O.c.update(a);O.update(a);H.position=O.c.position;a=Va();H.K=pa(B(e(1),a[0]),B(e(0,1),
a[1]));T.a[113]&&(Fa=!Fa,Ea());O.R<=O.M&&Z(5);0>=O.O&&Z(6)}T.a[115]&&(Ra=!Ra,console.log(ra.o.length));V.fillStyle="#000011";V.fillRect(0,0,P,Q);switch(Ma){default:case 0:F();V.fillStyle="#FFFFFF";V.textAlign="center";V.fillText("Level: "+(Y+1),.5*P,.25*Q-.17*R);V.fillText("need apples: "+O.R,.5*P,.25*Q-.1*R);V.fillText("rocks on level: "+O.Y,.5*P,.25*Q-.03*R);a=.5*P;c=Q-.1*R;var d=.1*R;V.fillStyle="#FFFFFF33";V.strokeStyle="#FFFFFF11";V.beginPath();V.arc(a+.2*d,c,.6*d,.75*Math.PI,1.25*Math.PI,!0);
V.arc(a+.2*d,c,.4*d,1.25*Math.PI,.75*Math.PI);V.closePath();V.fill();V.stroke();V.beginPath();V.moveTo(a,c);V.lineTo(a-.4*d,c+.4*d);V.lineTo(a-.4*d,c+.12*d);V.lineTo(a-.76*d,c+.12*d);V.lineTo(a-.76*d,c-.12*d);V.lineTo(a-.4*d,c-.12*d);V.lineTo(a-.4*d,c-.4*d);V.closePath();V.fill();V.stroke();Ua();Ta();break;case 1:F();V.fillStyle="#FFFFFF";V.textAlign="center";V.fillText("PAUSE ",.5*P,.5*Q-.4*R);V.fillText("Q to quit ",.5*P,.5*Q+.4*R);V.fillText("Esc to continue ",.5*P,.5*Q+.45*R);break;case 4:F();
V.fillStyle=M(0,0,0,parseInt(255*Math.max(0,1-Math.abs(3*W-1.5))));V.fillRect(0,0,P,Q);break;case 3:F();V.fillStyle="#FFFFFF";V.textAlign="start";V.textBaseline="middle";V.fillText(O.M+"/"+O.R,.15*R,.1*R);a=.1*R;c=.1*R;d=.046*R;d=void 0===d?10:d;V.fillStyle="#33FF33";V.beginPath();V.arc(a,c,.5*d,0,2*Math.PI);V.closePath();V.fill();for(a=0;a<O.O;a++){c=.5*P+(a-1)*R*.05;d=Q-.1*R;var f=.05*R;f=void 0===f?10:f;V.fillStyle="#FF0000";V.beginPath();V.moveTo(c,d+.5*f);V.arc(c-.175*f,d,.25*f,.75*Math.PI,1.75*
Math.PI);V.arc(c+.175*f,d,.25*f,1.25*Math.PI,2.25*Math.PI);V.closePath();V.fill()}a=P-.1*R;c=.1*R;d=.08*R;V.fillStyle="#FFFFFF33";V.strokeStyle="#FFFFFF11";V.rect(a-.5*d,c+.3*d,d,.2*d);V.rect(a-.5*d,c-.1*d,d,.2*d);V.rect(a-.5*d,c-.5*d,d,.2*d);V.fill();V.stroke();Ua();Ta();break;case 5:F();V.fillStyle="#FFFFFF";V.textAlign="center";V.fillText("YOU WIN!",.5*P,.1*Q);Sa();Ta();break;case 6:F(),V.fillStyle="#FFFFFF",V.textAlign="center",V.fillText("YOU LOSE!",.5*P,.1*Q),Sa(),a=P-.1*R,c=Q-.1*R,d=.1*R,V.fillStyle=
"#FFFFFF33",V.strokeStyle="#FFFFFF11",V.beginPath(),V.arc(a,c,.6*d,.5*Math.PI,.2*Math.PI),V.arc(a,c,.4*d,.2*Math.PI,.5*Math.PI,!0),V.lineTo(a,c+.3*d),V.lineTo(a+.3*d,c+.5*d),V.lineTo(a,c+.7*d),V.closePath(),V.fill(),V.stroke()}Ra&&(V.textAlign="end",V.fillText("FPS: "+Math.round(Ja),P-30,50));La=b;requestAnimationFrame(Wa);if(P!=document.documentElement.clientWidth||Q!=document.documentElement.clientHeight)P=document.documentElement.clientWidth,Q=document.documentElement.clientHeight,R=Math.min(P,
Q),Oa();T.ua()}requestAnimationFrame(Wa);function Oa(){var b=P,a=Q;Na.width=b;Na.height=a;var c=H;c.S=e(.5*b,.5*a);c.aa=Math.min(b,a);c=32;a>b&&(c*=a/b);V.font=parseInt(c)+"pt Arial"};
	
	</script>
</html>